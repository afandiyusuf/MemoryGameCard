function fb_login(){FB.login(function(e){e.authResponse?(console.log("Welcome!  Fetching your information.... "),access_token=e.authResponse.accessToken,user_id=e.authResponse.userID,registerWithFB()):console.log("User cancelled login or did not fully authorize.")},{scope:"public_profile,email"})}function registerWithFB(){console.log("cek user login"),FB.api("/me?fields=name,email",function(e){console.log(e),$.ajax({type:"POST",url:$("#base-api-url").html()+"/user/loginFB",data:{fb_id:e.id,email:e.email},success:function(a){if(console.log(a),200==a.status_code)window.location=$("#base-url").html()+"/page/game.php?access_token="+a.data.access_token;else if(404==a.status_code){$("#keterangan").css("display","none"),$("#tnc-page").css("display","none"),$("#please-wait-screen").css("display","none"),$("#how-to-play-page").css("display","none"),$("#username-register").val(""),$("#form-login").css("display","table"),$("#all-register-page").css("display","table"),$("#email").val(e.email),$("#nama").val(e.name),$("#fb_id").val(e.id),$("#reg_using").val("facebook");$("#password-register").val(),$("#confirm-passowrd").val(),$("#nama").val(),$("#alamat").val(),$("#email").val(),$("#no_hp").val(),$("#username-register").val()}},error:function(e){console.log(e)},dataType:"JSON"})})}function statusChangeCallback(e){console.log("statusChangeCallback"),console.log(e),"connected"===e.status?registerWithFB():"not_authorized"===e.status?console.log("not authorised"):console.log("Please login")}function register_tw(){console.log("hello"),$("#tnc-page").css("display","none"),$("#how-to-play-page").css("display","none"),$("#keterangan").css("display","none"),$("#form-login").css("display","table"),$("#all-register-page").css("display","table")}var checkLoginState=function(){FB.getLoginStatus(function(e){statusChangeCallback(e)})};window.fbAsyncInit=function(){FB.init({appId:"1700571170226419",cookie:!0,xfbml:!0,version:"v2.5"})},function(e,a,n){var s,o=e.getElementsByTagName(a)[0];e.getElementById(n)||(s=e.createElement(a),s.id=n,s.src="//connect.facebook.net/en_US/sdk.js",o.parentNode.insertBefore(s,o))}(document,"script","facebook-jssdk"),$(function(){function e(){$("#home-button").click(function(){window.location.href="http://www.siboskecil.com/index.php"}),$("#register-button").click(function(){o(null)}),$(".close-button").click(function(){i()}),$("#register-button-submit").click(function(){n()}),$("#button-login-submit").click(function(){a()}),$("#tncButton").click(function(){l()}),$("#tnc-ok").click(function(){t()}),$("#howto-btn").click(function(){r()}),$("#howto-ok").click(function(){c()})}function a(){var e=$("#username").val(),a=$("#password").val();$.ajax({type:"POST",url:$("#base-api-url").html()+"/user/login",data:{username:e,password:a},success:function(e){if(200==e.status_code){var a=$("#base-url").html();window.location=a+"/page/game.php?access_token="+e.data.access_token}else s(e.status_message)},error:function(e){o("koneksi error")},dataType:"JSON"})}function n(){var e=$("#nama").val(),a=$("#alamat").val(),n=$("#email").val(),s=$("#no_hp").val(),l=$("#username-register").val(),t=$("#fb_id").val(),i=$("#at").val(),c=$("#ats").val(),r=$("#twitter_id").val(),u=$("#twitter_profile_url").val();if(""==e||null==e||""==a||null==a||""==s||null==s||""==l||null==l)return void o("Data tidak lengkap");$("#form-login").css("display","none"),$("#please-wait-screen").css("display","table");var p="";"facebook"==$("#reg_using").val()?p="registerFb":"twitter"==$("#reg_using").val()&&(p="registerTw",console.log($("#base-api-url").html()+"/user/"+p)),$.ajax({type:"POST",url:$("#base-api-url").html()+"/user/"+p,data:{username:l,nama_depan:e,nama_belakang:"_",email:n,alamat:a,no_hp:s,fb_id:t,at:i,ats:c,twitter_id:r,twitter_profile_url:u},success:function(e){402==e.status_code?(console.log("402"),o("data yang anda masukkan tidak lengkap")):401==e.status_code?(console.log("401"),o("username sudah terpakai, pakai username yang lain")):200==e.status_code?(console.log(e),window.location=$("#base-url").html()+"/page/game.php?access_token="+e.data.access_token):console.log(e)},error:function(e){console.log(e),o("koneksi error")},dataType:"JSON"})}function s(e){c(),$("#warning-login").html(e)}function o(e){null!=e?($("#keterangan").css("display","table"),$("#keterangan").html(e)):$("#keterangan").css("display","none"),$("#tnc-page").css("display","none"),$("#please-wait-screen").css("display","none"),$("#how-to-play-page").css("display","none"),$("#username-register").val(""),$("#form-login").css("display","table"),$("#all-register-page").css("display","table")}function l(){c(),$("#tnc-page").css("display","table"),$("#all-register-page").css("display","table")}function t(){c()}function i(e){c()}function c(){$("#login-page").css("display","none"),$("#title-image").css("display","none"),$("#tnc-page").css("display","none"),$("#form-login").css("display","none"),$("#please-wait-screen").css("display","none"),$("#all-register-page").css("display","none"),$("#how-to-play-page").css("display","none")}function r(){c(),$("#how-to-play-page").css("display","table"),$("#all-register-page").css("display","table")}window.scrollTo(0,1),e()});

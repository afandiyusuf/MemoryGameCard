function init(){window.scrollTo(0,1);var e=document.getElementById("game");document.body.clientWidth>800?document.body.clientHeight<450?(e.height=document.body.clientHeight,e.width=e.height/9*16):document.body.clientHeight<document.body.clientWidth/16*9?(e.height=document.body.clientHeight-document.body.clientHeight/15,e.width=e.height/9*16):(e.width=document.body.clientWidth-document.body.clientWidth/15,e.height=e.width/16*9):(e.width=document.body.offsetWidth,e.height=e.width/16*9);var t=new MainGame;MainGame.GameWidth=e.width,MainGame.GameHeight=e.height;var i=new PreloadGame;i.mainGame=t,i.init(),t.isOUt=$("#isOut").html()}var MainGame=function(){function e(){this.idleCard=0,this.longIdleCard=3,this.urlBG=new Array("../asset/match boss/BG 1.png","../asset/match boss/BG 1.png","../asset/match boss/BG 2.png","../asset/match boss/BG 2.png","../asset/match boss/BG 3.png"),this.timers=0,this.arrCard=new Array,this.dummyCard=new Array,this.backUrl="../asset/Card/Back.png",this.margin=5,this.id=0,this.stage=new createjs.Stage("game"),this.arrScore=new Array,this.totalScore=0,this.isPause=!0,this.isOUt=""}return e.prototype.init=function(){var e=this;this.ui=new UI(this),"1"==this.isOUt?(this.generateDummyCard(),this.ui.CreateCobaLagiBesok()):(this.GotoMainMenu(),this.gameTimer=new GameTimer),createjs.Ticker.addEventListener("tick",function(){return e.handleTick(e)}),createjs.Ticker.addEventListener("tick",this.deltaTimeCatcher)},e.prototype.GotoMainMenu=function(){this.ui.changeBodyBG(this.urlBG[0]),this.arrScore=new Array,createjs.Ticker.framerate=60,this.timers=0,this.ui.callMainMenu(this.stage),this.stage.update(),e.thisLevel=0,$.ajax({type:"POST",url:$("#base_api_url").html()+"/game/creatSession",data:{access_token:$("#access_token").html()},success:function(t){200==t.status_code?e.gt=t.data.game_token:window.location.href=e.LogOutUrl},error:function(e){},dataType:"JSON"})},e.prototype.StartPlayGame=function(){this.gameTimer.init(this),this.timers=0,this.idleCard=0,e.firstId=0,e.secondId=0,this.id=0,this.arrCard=new Array,this.LongGameTimer=e.ArrTimer[e.thisLevel],e.totalCard=0,this.allContainer=new createjs.MovieClip,this.stage.addChild(this.allContainer),this.generateCard(),this.ui.CallGameUi(),this.isPause=!1},e.prototype.NextGame=function(){this.gameTimer.Destroy(),this.DestroyAllDummyCard(),this.DestroyAllCard(),this.arrScore.push(Math.round(this.LongGameTimer-this.timers));var t=this.arrScore,i=e.thisLevel;$.ajax({type:"POST",url:$("#base_api_url").html()+"/game/postScorePerLevel",data:{access_token:$("#access_token").html(),game_token:e.gt,score:t[i],level:"level"+(i+1)},success:function(t){200==t.status_code||(window.location.href=e.LogOutUrl)},error:function(e){},dataType:"JSON"}),e.thisLevel++,this.ui.changeBodyBG(this.urlBG[e.thisLevel]),this.StartPlayGame()},e.prototype.handlePause=function(){this.isPause=!0},e.prototype.handleResume=function(){this.isPause=!1},e.prototype.handleWin=function(){if(this.isPause=!0,this.DestroyThis(),this.generateDummyCard(),e.thisLevel==e.ArrTimer.length-1){this.arrScore.push(Math.round(this.LongGameTimer-this.timers));var t=this.arrScore,i=e.thisLevel;$.ajax({type:"POST",url:$("#base_api_url").html()+"/game/postScorePerLevel",data:{access_token:$("#access_token").html(),game_token:e.gt,score:t[i],level:"level"+(i+1)},success:function(t){200==t.status_code||(window.location.href=e.LogOutUrl)},error:function(e){},dataType:"JSON"}),this.totalScore=0;for(var a=0;a<this.arrScore.length;a++)this.totalScore+=this.arrScore[a];this.ui.callWinALL()}else this.ui.DestroyGameUI(),this.ui.callWinScreen()},e.prototype.handleTick=function(t){t.isPause||(t.stage.update(),t.timers+=e.deltaTime/1e3,t.idleCard+=e.deltaTime/1e3,this.gameTimer.update((t.LongGameTimer-t.timers)/t.LongGameTimer),t.idleCard>t.longIdleCard&&(0!=e.firstId&&(e.firstCard.swapToFace(e.firstCard),e.firstId=0),0!=e.secondId&&(e.secondCard.swapToFace(e.secondCard),e.secondId=0),t.idleCard=0),t.timers>t.LongGameTimer&&(t.DestroyThis(),t.ui.DestroyGameUI(),t.ui.CallFailedScreen(),t.isPause=!0))},e.prototype.pauseGame=function(){},e.prototype.deltaTimeCatcher=function(t){e.deltaTime=t.delta},e.prototype.WIN_GAME=function(){this.DestroyThis()},e.prototype.LOSE_GAME=function(){},e.prototype.DestroyThis=function(){this.stage.removeChild(this.allContainer),this.DestroyAllCard()},e.prototype.DestroyAllCard=function(){for(var e=0;e<this.arrCard.length;e++)this.arrCard[0].Destroy();this.stage.removeChild(this.allContainer)},e.prototype.DestroyAllDummyCard=function(){for(var e=0;e<this.dummyCard.length;e++)this.dummyCard[0].Destroy();this.dummyCard=new Array},e.prototype.generateCard=function(){for(var t=0;t<e.width;t++)for(var i=0;i<e.height;i++){this.id++,e.totalCard++;var a=new Card(this);a.init(this.stage,this.allContainer,t,i,this.margin,this.id),this.arrCard.push(a)}this.stage.update(),this.arrCard=this.shuffleArray(this.arrCard),this.reArrangeAll(),this.containerWidth=(this.arrCard[0].trueWidth+this.arrCard[0].margin)*e.width,this.allContainer.x=(e.GameWidth-this.containerWidth)/2,this.allContainer.y=(e.GameHeight-this.containerWidth)/2+e.GameHeight/30},e.prototype.generateDummyCard=function(){this.allContainer=new createjs.MovieClip,this.stage.addChild(this.allContainer);for(var t=0;t<e.width;t++)for(var i=0;i<e.height;i++){var a=new Card(this);a.init(this.stage,this.allContainer,t,i,this.margin,0),this.dummyCard.push(a)}for(var s=0,t=0;t<e.width;t++)for(var i=0;i<e.height;i++)this.dummyCard[s].reposition(t,i),s++;this.containerWidth=(this.dummyCard[0].trueWidth+this.dummyCard[0].margin)*e.width,this.allContainer.x=(e.GameWidth-this.containerWidth)/2,this.allContainer.y=(e.GameHeight-this.containerWidth)/2+e.GameHeight/30,this.stage.update()},e.prototype.reArrangeAll=function(){for(var t=0,i=0;i<e.width;i++)for(var a=0;a<e.height;a++)this.arrCard[t].reposition(i,a),t++},e.prototype.shuffleArray=function(e){for(var t=e.length-1;t>0;t--){var i=Math.floor(Math.random()*(t+1)),a=e[t];e[t]=e[i],e[i]=a}return e},e.LogOutUrl="http://www.siboskecil.com/php/logout.php",e.leaderboardUrl="http://www.siboskecil.com/page/leaderboard.php",e.thisLevel=0,e.ArrTimer=new Array(240,240,180,180,120),e.firstId=0,e.secondId=0,e.longIdle=1,e.totalCard=0,e.sessionTimer=0,e.longSession=60,e.globalScale=.5,e.deltaTime=0,e.width=4,e.height=4,e}(),PreloadGame=function(){function e(){}return e.prototype.init=function(){var t=this,i=new createjs.LoadQueue(!0);i.on("fileload",this.handleFileLoad,this),i.on("complete",function(){return t.handleComplete(null,t.mainGame)},this),i.on("progress",this.onProgress),i.loadFile({id:"card1",src:"../asset/Card/Card 1.png"}),i.loadFile({id:"card2",src:"../asset/Card/Card 2.png"}),i.loadFile({id:"card3",src:"../asset/Card/Card 3.png"}),i.loadFile({id:"card4",src:"../asset/Card/Card 4.png"}),i.loadFile({id:"card5",src:"../asset/Card/Card 5.png"}),i.loadFile({id:"card6",src:"../asset/Card/Card 6.png"}),i.loadFile({id:"card7",src:"../asset/Card/Card 7.png"}),i.loadFile({id:"card8",src:"../asset/Card/Card 8.png"}),i.loadFile({id:"card9",src:"../asset/Card/Card 9.png"}),i.loadFile({id:"card10",src:"../asset/Card/Card 10.png"}),i.loadFile({id:"card11",src:"../asset/Card/Card 11.png"}),i.loadFile({id:"card12",src:"../asset/Card/Card 12.png"}),i.loadFile({id:"card13",src:"../asset/Card/Card 13.png"}),i.loadFile({id:"card14",src:"../asset/Card/Card 14.png"}),i.loadFile({id:"card15",src:"../asset/Card/Card 15.png"}),i.loadFile({id:"card16",src:"../asset/Card/Card 16.png"}),i.loadFile({id:"lvl1",src:"../asset/1.png"}),i.loadFile({id:"lvl2",src:"../asset/2.png"}),i.loadFile({id:"lvl3",src:"../asset/3.png"}),i.loadFile({id:"lvl4",src:"../asset/4.png"}),i.loadFile({id:"lvl5",src:"../asset/5.png"}),i.loadFile({id:"card_back",src:"../asset/final/bcak.png"}),i.loadFile({id:"bg",src:"../asset/final/BG.jpg"}),i.loadFile({id:"border",src:"../asset/final/Border.png"}),i.loadFile({id:"keluar-button",src:"../asset/final/keluar.png"}),i.loadFile({id:"bg2",src:"../asset/match boss/BG 2.png"}),i.loadFile({id:"main-lagi-button",src:"../asset/final/MAIN LAGI.PNG"}),i.loadFile({id:"main-button",src:"../asset/final/MAIN.png"}),i.loadFile({id:"corner-logo",src:"../asset/final/Tao Kae Noi.png"}),i.loadFile({id:"title-image",src:"../asset/final/Title.png"}),i.loadFile({id:"white-border",src:"../asset/final/Border 10px10.png"}),i.loadFile({id:"bg3",src:"../asset/match boss/BG 3.png"}),i.loadFile({id:"pause",src:"../asset/match boss/Pause Button.png"}),i.loadFile({id:"pause-panel",src:"../asset/match boss/Pause.png"}),i.loadFile({id:"continue",src:"../asset/match boss/Continue.png"}),i.loadFile({id:"home",src:"../asset/match boss/Home.png"}),i.loadFile({id:"failed-panel",src:"../asset/Card/Failed.png"}),i.loadFile({id:"main-lagi2",src:"../asset/match boss/Main Lagi 2.png"}),i.loadFile({id:"lanjut",src:"../asset/match boss/Lanjut.png"}),i.loadFile({id:"win-lvl",src:"../asset/Card/Succed.png"}),i.loadFile({id:"time",src:"../asset/final/Time.png"}),i.loadFile({id:"time-container",src:"../asset/final/Time Container.png"}),i.loadFile({id:"bg1",src:"../asset/match boss/BG 1.png"}),i.loadFile({id:"fb-share",src:"../asset/match boss/FB Share.png"}),i.loadFile({id:"konfirmasi-panel",src:"../asset/Card/Quit.png"}),i.loadFile({id:"check-leaderboard-button",src:"../asset/Card/Button Check Leaderboard.png"}),i.loadFile({id:"check-score-button",src:"../asset/Card/Button Check skor.png"}),i.loadFile({id:"victory-all",src:"../asset/Card/Victory end.png"}),i.loadFile({id:"sinar",src:"../asset/Card/sinar.png"}),i.loadFile({id:"score-panel",src:"../asset/Card/Wadah Score.png"}),i.loadFile({id:"nyawa-habis-panel",src:"../asset/Card/Out of Heart.png"}),i.load(),e.queue=i},e.prototype.handleFileLoad=function(e){},e.prototype.handleComplete=function(e,t){t.init()},e.prototype.onProgress=function(e){var t=Math.round(100*e.loaded),i=($("#state"),$("#progress")),a=$("#progressbar .bar");i.text(t+"%"),a.css("display","none"),100==t&&(i.css("display","none"),a.css("display","none"))},e}(),GameOverScreen=function(){function e(){this.bgUrl="../asset/Card/Back.png",this.GameOverScreen=function(){}}return e.prototype.ShowGameOver=function(e){var t=this;this.container=e,this.BgGameOver=new createjs.Bitmap(this.bgUrl),this.BgGameOver.scaleX=.6,this.BgGameOver.scaleY=this.BgGameOver.scaleX,this.BgGameOver.x=-10,e.addChild(this.BgGameOver),this.RestartButton=new createjs.Bitmap("asset/final/MAIN LAGI.PNG"),this.RestartButton.scaleX=.6,this.RestartButton.scaleY=.6,this.RestartButton.addEventListener("click",function(){return t.RestartGame(t)}),this.QuitButton=new createjs.Bitmap("asset/final/keluar.png"),this.QuitButton.scaleX=.6,this.QuitButton.scaleY=.6,this.QuitButton.y=200,this.QuitButton.x=150,this.QuitButton.addEventListener("click",function(){return t.QuitGame(t)}),e.addChild(this.QuitButton)},e.prototype.RestartGame=function(e){window.location.reload()},e.prototype.QuitGame=function(e){window.location.reload()},e.prototype.DestroyThis=function(e){e.container.removeAllEventListeners("click"),e.container.removeChild(this.BgGameOver),e.container.removeChild(this.RestartButton),e.container.removeChild(this.QuitButton)},e}(),UI=function(){function e(e){this.mainGame=e}return e.prototype.changeBodyBG=function(e){$(document.body).css("background-image","url('"+e+"')")},e.prototype.callWinALL=function(){var e=this;this.whiteBorder2=new createjs.Bitmap(PreloadGame.queue.getResult("white-border")),this.whiteBorder2.scaleX=MainGame.GameWidth/this.whiteBorder2.image.width,this.whiteBorder2.scaleY=this.whiteBorder2.scaleX,this.mainGame.stage.addChild(this.whiteBorder2),this.whiteBorder=new createjs.Bitmap(PreloadGame.queue.getResult("sinar")),this.whiteBorder.scaleX=MainGame.GameWidth/this.whiteBorder.image.width,this.whiteBorder.scaleY=this.whiteBorder.scaleX,this.mainGame.stage.addChild(this.whiteBorder),this.winPanelAll=new createjs.Bitmap(PreloadGame.queue.getResult("win-lvl")),this.winPanelAll.scaleY=(MainGame.GameHeight-MainGame.GameHeight/4)/this.winPanelAll.image.height,this.winPanelAll.scaleX=this.winPanel.scaleY;var t=this.winPanelAll.image.width*this.winPanelAll.scaleX,i=this.winPanelAll.image.height*this.winPanelAll.scaleY;this.winPanelAll.x=(MainGame.GameWidth-t)/2,this.winPanelAll.y=(MainGame.GameHeight-i)/2,this.mainGame.stage.addChild(this.winPanelAll),this.checkScoreButton=new createjs.Bitmap(PreloadGame.queue.getResult("check-score-button")),this.checkScoreButton.scaleX=this.winPanelAll.scaleX,this.checkScoreButton.scaleY=this.winPanelAll.scaleX;var a=this.checkScoreButton.image.height*this.checkScoreButton.scaleY;this.checkScoreButton.x=this.winPanelAll.x+t/2-this.checkScoreButton.image.width*this.checkScoreButton.scaleX*.5,this.checkScoreButton.y=this.winPanelAll.y+i-a-i/10,this.mainGame.stage.addChild(this.checkScoreButton),this.checkScoreButton.addEventListener("click",function(){return e.ShowScorePanel()}),this.mainGame.stage.update()},e.prototype.ShowScorePanel=function(){var e=this;this.checkScoreButton.removeEventListener("click",function(){return e.ShowScorePanel()}),this.scorePanel=new createjs.Bitmap(PreloadGame.queue.getResult("score-panel")),this.scorePanel.scaleY=(MainGame.GameHeight-MainGame.GameHeight/3)/this.scorePanel.image.height,this.scorePanel.scaleX=this.scorePanel.scaleY;var t=this.scorePanel.image.width*this.scorePanel.scaleX,i=this.scorePanel.image.height*this.scorePanel.scaleY;this.scorePanel.x=(MainGame.GameWidth-t)/2,this.scorePanel.y=(MainGame.GameHeight-i)/2,this.mainGame.stage.addChild(this.scorePanel),this.checkScoreButton=new createjs.Bitmap(PreloadGame.queue.getResult("check-leaderboard-button")),this.checkScoreButton.scaleX=this.scorePanel.scaleX,this.checkScoreButton.scaleY=this.scorePanel.scaleX;var a=this.checkScoreButton.image.height*this.checkScoreButton.scaleY;this.checkScoreButton.x=this.scorePanel.x+t/2-this.checkScoreButton.image.width*this.checkScoreButton.scaleX*.5,this.checkScoreButton.y=this.scorePanel.y+i-a-i/10,this.mainGame.stage.addChild(this.checkScoreButton),this.checkScoreButton.addEventListener("click",function(){return e.gotoLeaderboard()}),this.scoreText=new createjs.Text,this.scoreText.text=(960-this.mainGame.totalScore).toString()+" Detik",this.scoreText.font="bold 80px Luckiest Guy",this.scoreText.color="black",this.mainGame.stage.addChild(this.scoreText),this.mainGame.stage.update();var s=this.scoreText.getBounds();this.checkScoreButton.getBounds();this.scoreText.x=(MainGame.GameWidth-s.width)/2,this.scoreText.y=this.checkScoreButton.y-s.height-s.height/5,this.mainGame.stage.update()},e.prototype.CreateCobaLagiBesok=function(){var e=this;this.whiteBorder=new createjs.Bitmap(PreloadGame.queue.getResult("white-border")),this.whiteBorder.scaleX=MainGame.GameWidth/this.whiteBorder.image.width,this.whiteBorder.scaleY=this.whiteBorder.scaleX,this.whiteBorder.addEventListener("click",function(){return e.GotoMainMenu()}),this.mainGame.stage.addChild(this.whiteBorder),this.failedPanel=new createjs.Bitmap(PreloadGame.queue.getResult("nyawa-habis-panel")),this.failedPanel.scaleY=(MainGame.GameHeight-MainGame.GameHeight/4)/this.failedPanel.image.height,this.failedPanel.scaleX=this.failedPanel.scaleY,this.failedPanel.addEventListener("click",function(){return e.GotoMainMenu()});var t=this.failedPanel.image.width*this.failedPanel.scaleX,i=this.failedPanel.image.height*this.failedPanel.scaleY;this.failedPanel.x=(MainGame.GameWidth-t)/2,this.failedPanel.y=(MainGame.GameHeight-i)/2,this.mainGame.stage.addChild(this.failedPanel),this.mainGame.stage.update(),createjs.Tween.get(null).wait(1e4).to(null).call(function(){return e.gotoHome()})},e.prototype.callLvlImage=function(e){this.lvlImage=new createjs.Bitmap(PreloadGame.queue.getResult("lvl"+e)),this.lvlImage.scaleX=.7,this.lvlImage.scaleY=.7,this.lvlImage.y=MainGame.GameHeight-this.lvlImage.image.height*this.lvlImage.scaleX-MainGame.GameHeight/10,this.lvlImage.x=MainGame.GameWidth-this.lvlImage.image.width*this.lvlImage.scaleX-MainGame.GameWidth/10,this.mainGame.stage.addChild(this.lvlImage)},e.prototype.destroyLvlImage=function(){this.mainGame.stage.removeChild(this.lvlImage)},e.prototype.gotoLeaderboard=function(){var e=this;this.checkScoreButton.removeEventListener("click",function(){return e.gotoLeaderboard()}),this.mainGame.stage.removeChild(this.checkScoreButton),this.stage.update(),$.ajax({type:"POST",url:$("#base_api_url").html()+"/game/postTotalScore",data:{access_token:$("#access_token").html(),game_token:MainGame.gt,score:this.mainGame.totalScore},success:function(e){200==e.status_code?window.location.href="http://www.siboskecil.com/page/leaderboard.php":window.location.href=MainGame.LogOutUrl},error:function(e){},dataType:"JSON"})},e.prototype.DestroyWinAll=function(){this.mainGame.stage.removeChild(this.whiteBorder),this.mainGame.stage.removeChild(this.winPanelAll),this.mainGame.stage.removeChild(this.checkScoreButton),this.mainGame.stage.update()},e.prototype.callWinScreen=function(){var e=this;this.whiteBorder=new createjs.Bitmap(PreloadGame.queue.getResult("white-border")),this.whiteBorder.scaleX=MainGame.GameWidth/this.whiteBorder.image.width,this.whiteBorder.scaleY=this.whiteBorder.scaleX,this.mainGame.stage.addChild(this.whiteBorder),this.winPanel=new createjs.Bitmap(PreloadGame.queue.getResult("win-lvl")),this.winPanel.scaleY=(MainGame.GameHeight-MainGame.GameHeight/4)/this.winPanel.image.height,this.winPanel.scaleX=this.winPanel.scaleY;var t=this.winPanel.image.width*this.winPanel.scaleX,i=this.winPanel.image.height*this.winPanel.scaleY;this.winPanel.x=(MainGame.GameWidth-t)/2,this.winPanel.y=(MainGame.GameHeight-i)/2,this.mainGame.stage.addChild(this.winPanel),this.mainGame.stage.update(),createjs.Tween.get(null).wait(3e3).to(null).call(function(){return e.LanjutGame()})},e.prototype.ShareFB=function(){FB.ui({method:"share",href:"http://www.siboskecil.com"},function(e){e&&!e.error_message})},e.prototype.DestroyWinScreen=function(){this.mainGame.stage.removeChild(this.whiteBorder),this.mainGame.stage.removeChild(this.winPanel),this.mainGame.stage.update()},e.prototype.LanjutGame=function(){this.DestroyWinScreen(),this.mainGame.NextGame()},e.prototype.callMainMenu=function(e){var t=this;this.stage=e,this.mainImage=new createjs.Bitmap(PreloadGame.queue.getResult("main-button")),this.mainButton=new createjs.MovieClip,this.mainButton.addChild(this.mainImage),this.keluarButton=new createjs.Bitmap(PreloadGame.queue.getResult("keluar-button")),this.mainButton.addChild(this.mainImage),this.mainButton.scaleX=MainGame.GameWidth/6/this.mainImage.image.width,this.mainButton.scaleY=this.mainButton.scaleX,this.stage.addChild(this.mainButton),this.keluarButton.scaleX=this.mainButton.scaleX,this.keluarButton.scaleY=this.mainButton.scaleY,this.logoImage=new createjs.Bitmap(PreloadGame.queue.getResult("corner-logo")),this.logoImage.scaleX=MainGame.GameWidth/4/this.logoImage.image.width,this.logoImage.scaleY=this.logoImage.scaleX,this.logoImage.regY=.5*-this.logoImage.image.height,this.logo2Image=new createjs.Bitmap(PreloadGame.queue.getResult("title-image")),this.logo2Image.scaleY=(MainGame.GameHeight-MainGame.GameHeight/12)/this.logo2Image.image.width,this.logo2Image.scaleX=this.logo2Image.scaleY,this.stage.addChild(this.logo2Image),this.logoImage.x=10,this.logoImage.y=0,this.logo2Image.x=MainGame.GameWidth/10,this.logo2Image.y=MainGame.GameHeight/2-this.logo2Image.image.height/2*this.logo2Image.scaleY;var i=this.logo2Image.image.width*this.logo2Image.scaleX;this.mainButton.x=this.logo2Image.x+i+(MainGame.GameWidth-(i+this.logo2Image.x))/2-this.mainImage.image.width*this.mainButton.scaleX*.5,this.mainButton.y=this.logo2Image.image.height*this.logo2Image.scaleY/2+this.logo2Image.y;var a=this.mainButton.getBounds();this.keluarButton.x=this.mainButton.x,this.keluarButton.y=this.mainButton.y+a.height+a.height/10,this.stage.addChild(this.keluarButton),this.mainButton.addEventListener("click",function(){return t.startGame()}),this.keluarButton.addEventListener("click",function(){return t.gotoHome()}),this.mainGame.stage.update()},e.prototype.CallGameUi=function(){var e=this;this.callLvlImage(MainGame.thisLevel+1),this.pauseImage=new createjs.Bitmap(PreloadGame.queue.getResult("pause")),this.pauseImage.scaleX=MainGame.GameWidth/25/this.pauseImage.image.width,this.pauseImage.scaleY=this.pauseImage.scaleX,this.pauseImage.x=MainGame.GameWidth-this.pauseImage.image.width*this.pauseImage.scaleX-MainGame.GameWidth/25,this.pauseImage.y=MainGame.GameHeight/10,this.pauseButton=new createjs.MovieClip,this.pauseButton.addChild(this.pauseImage),this.mainGame.stage.addChild(this.pauseButton),this.pauseButton.addEventListener("click",function(){return e.pauseGame()})},e.prototype.DestroyGameUI=function(){var e=this;this.pauseButton.removeChild(this.pauseImage),this.mainGame.stage.removeChild(this.pauseButton),this.pauseButton.removeEventListener("click",function(){return e.pauseGame()}),this.destroyLvlImage(),this.mainGame.stage.update()},e.prototype.pauseGame=function(){this.DestroyGameUI(),this.mainGame.handlePause(),this.CallPauseScreen(),this.mainGame.stage.update()},e.prototype.CallFailedScreen=function(){var e=this;this.whiteBorder=new createjs.Bitmap(PreloadGame.queue.getResult("white-border")),this.whiteBorder.scaleX=MainGame.GameWidth/this.whiteBorder.image.width,this.whiteBorder.scaleY=this.whiteBorder.scaleX,this.whiteBorder.addEventListener("click",function(){return e.GotoMainMenu()}),this.mainGame.stage.addChild(this.whiteBorder),this.failedPanel=new createjs.Bitmap(PreloadGame.queue.getResult("failed-panel")),this.failedPanel.scaleY=(MainGame.GameHeight-MainGame.GameHeight/4)/this.failedPanel.image.height,this.failedPanel.scaleX=this.failedPanel.scaleY,this.failedPanel.addEventListener("click",function(){return e.GotoMainMenu()});var t=this.failedPanel.image.width*this.failedPanel.scaleX,i=this.failedPanel.image.height*this.failedPanel.scaleY;this.failedPanel.x=(MainGame.GameWidth-t)/2,this.failedPanel.y=(MainGame.GameHeight-i)/2,this.mainGame.stage.addChild(this.failedPanel),this.mainGame.stage.update(),createjs.Tween.get(null).wait(3e3).to(null).call(function(){return e.gotoHome()})},e.prototype.gotoHome=function(){window.location.href="http://www.siboskecil.com"},e.prototype.DestroyFailScreen=function(){var e=this;this.mainGame.stage.removeChild(this.failedPanel),this.mainGame.stage.removeChild(this.whiteBorder),this.failedPanel.removeEventListener("click",function(){return e.GotoMainMenu()}),this.whiteBorder.removeEventListener("click",function(){return e.GotoMainMenu()})},e.prototype.GotoMainMenu=function(){this.mainGame.gameTimer.Destroy(),this.DestroyFailScreen(),this.mainGame.stage.update(),this.mainGame.GotoMainMenu()},e.prototype.callKonfirmasiScreen=function(){var e=this;this.DestroyPauseScreen(),this.whiteBorder=new createjs.Bitmap(PreloadGame.queue.getResult("white-border")),this.whiteBorder.scaleX=MainGame.GameWidth/this.whiteBorder.image.width,this.whiteBorder.scaleY=this.whiteBorder.scaleX,this.mainGame.stage.addChild(this.whiteBorder),this.konfirmasiPanel=new createjs.Bitmap(PreloadGame.queue.getResult("konfirmasi-panel")),this.konfirmasiPanel.scaleY=(MainGame.GameHeight-MainGame.GameHeight/4)/this.konfirmasiPanel.image.height,this.konfirmasiPanel.scaleX=this.konfirmasiPanel.scaleY;var t=this.konfirmasiPanel.image.width*this.konfirmasiPanel.scaleX,i=this.konfirmasiPanel.image.height*this.konfirmasiPanel.scaleY;this.konfirmasiPanel.x=(MainGame.GameWidth-t)/2,this.konfirmasiPanel.y=(MainGame.GameHeight-i)/2,this.mainGame.stage.addChild(this.konfirmasiPanel),this.mainLagiButton=new createjs.Bitmap(PreloadGame.queue.getResult("main-lagi-button")),this.mainLagiButton.scaleX=this.konfirmasiPanel.scaleX,this.mainLagiButton.scaleY=this.konfirmasiPanel.scaleX;var a=this.mainLagiButton.image.height*this.mainLagiButton.scaleY;this.mainLagiButton.x=this.konfirmasiPanel.x+t/2-this.mainLagiButton.image.width*this.mainLagiButton.scaleX*.5-this.mainLagiButton.image.width*this.mainLagiButton.scaleX*.5,this.mainLagiButton.y=this.konfirmasiPanel.y+i-a-i/20,this.mainGame.stage.addChild(this.mainLagiButton),this.mainLagiButton.addEventListener("click",function(){return e.clickContinueFromKonfirmasi()}),this.keluarButton=new createjs.Bitmap(PreloadGame.queue.getResult("keluar-button")),this.keluarButton.scaleX=this.konfirmasiPanel.scaleX,this.keluarButton.scaleY=this.konfirmasiPanel.scaleX;var a=this.keluarButton.image.height*this.keluarButton.scaleY;this.keluarButton.x=this.mainLagiButton.x+this.mainLagiButton.scaleX*this.mainLagiButton.image.width+20,this.keluarButton.y=this.mainLagiButton.y,this.keluarButton.addEventListener("click",function(){return e.clickHome()}),this.mainGame.stage.addChild(this.keluarButton),this.mainGame.stage.update()},e.prototype.DestroyKonfirmasiPanel=function(){var e=this;this.keluarButton.removeEventListener("click",function(){return e.clickHome()}),this.mainLagiButton.removeEventListener("click",function(){return e.clickContinueFromKonfirmasi()}),this.mainGame.stage.removeChild(this.whiteBorder),this.mainGame.stage.removeChild(this.konfirmasiPanel),this.mainGame.stage.removeChild(this.mainLagiButton),this.mainGame.stage.removeChild(this.keluarButton),this.mainGame.stage.update()},e.prototype.CallPauseScreen=function(){var e=this;this.whiteBorder=new createjs.Bitmap(PreloadGame.queue.getResult("white-border")),this.whiteBorder.scaleX=MainGame.GameWidth/this.whiteBorder.image.width,this.whiteBorder.scaleY=this.whiteBorder.scaleX,this.mainGame.stage.addChild(this.whiteBorder),this.pausePanel=new createjs.Bitmap(PreloadGame.queue.getResult("pause-panel")),this.pausePanel.scaleY=(MainGame.GameHeight-MainGame.GameHeight/4)/this.pausePanel.image.height/2,this.pausePanel.scaleX=this.pausePanel.scaleY;var t=this.pausePanel.image.width*this.pausePanel.scaleX,i=this.pausePanel.image.height*this.pausePanel.scaleY;this.pausePanel.x=(MainGame.GameWidth-t)/2,this.pausePanel.y=(MainGame.GameHeight-i)/2,this.mainGame.stage.addChild(this.pausePanel),this.continueImage=new createjs.Bitmap(PreloadGame.queue.getResult("continue")),this.continueImage.scaleX=this.pausePanel.scaleX,this.continueImage.scaleY=this.continueImage.scaleX;var a=this.continueImage.image.height*this.continueImage.scaleY;this.continueImage.x=this.pausePanel.x+t/10,this.continueImage.y=this.pausePanel.y+i-a-i/10,this.mainGame.stage.addChild(this.continueImage),this.homeImage=new createjs.Bitmap(PreloadGame.queue.getResult("home")),this.homeImage.scaleX=this.continueImage.scaleX,this.homeImage.scaleY=this.homeImage.scaleX;var s=this.homeImage.image.height*this.homeImage.scaleY,n=this.homeImage.image.width*this.homeImage.scaleX;this.homeImage.y=this.pausePanel.y+i-s-i/10,this.homeImage.x=t+this.pausePanel.x-n-t/10,this.mainGame.stage.addChild(this.homeImage),this.continueImage.addEventListener("click",function(){return e.clickContinue()}),this.homeImage.addEventListener("click",function(){return e.callKonfirmasiScreen()})},e.prototype.clickContinue=function(){this.DestroyPauseScreen(),this.mainGame.handleResume(),this.CallGameUi()},e.prototype.clickContinueFromKonfirmasi=function(){this.DestroyKonfirmasiPanel(),this.mainGame.handleResume(),this.CallGameUi()},e.prototype.clickHome=function(){window.location.href=MainGame.LogOutUrl},e.prototype.startGame=function(){this.DestroyMainMenu(),this.mainGame.StartPlayGame()},e.prototype.DestroyMainMenu=function(){var e=this;this.keluarButton.removeEventListener("click",function(){return e.gotoHome()}),this.stage.removeChild(this.keluarButton),this.mainButton.removeEventListener("click",function(){return e.startGame()}),this.mainButton.removeChild(this.mainImage),this.stage.removeChild(this.mainButton),this.stage.removeChild(this.logo2Image)},e.prototype.DestroyPauseScreen=function(){var e=this;this.continueImage.removeEventListener("click",function(){return e.clickContinue()}),this.homeImage.removeEventListener("click",function(){return e.clickHome()}),this.mainGame.stage.removeChild(this.homeImage),this.mainGame.stage.removeChild(this.pausePanel),this.mainGame.stage.removeChild(this.whiteBorder),this.mainGame.stage.removeChild(this.continueImage)},e}(),GameTimer=function(){function e(){this.imageUrl="../asset/final/Time.png",this.containerUrl="../asset/final/Time Container.png",this.initScale=2,this.timerWidth=824,this.GameTimer=function(){}}return e.prototype.init=function(e){this.mainGame=e,this.timerContainerClip=new createjs.MovieClip,this.stage=e.stage,this.gameContainer=e.stage,this.timerContainerImage=new createjs.Bitmap(PreloadGame.queue.getResult("time-container")),this.initScale=MainGame.GameWidth/2/this.timerContainerImage.image.width,this.timerContainerImage.scaleX=this.initScale,this.timerContainerImage.scaleY=this.timerContainerImage.scaleX,this.timerContainerImage.x=MainGame.GameWidth/2-this.timerContainerImage.image.width*this.timerContainerImage.scaleX*.5,this.timerContainerImage.y=MainGame.GameHeight/10,this.timerImage=new createjs.Bitmap(PreloadGame.queue.getResult("time")),this.timerImage.scaleX=this.timerContainerImage.scaleX,this.timerImage.scaleY=this.timerContainerImage.scaleX,this.timerImage.x=this.timerContainerImage.x+this.timerContainerImage.image.width*this.timerContainerImage.scaleX/8,this.timerImage.y=this.timerContainerImage.y+this.timerContainerImage.image.height/2*this.timerContainerImage.scaleY-this.timerImage.image.height*this.timerImage.scaleY*.4,this.timerContainerClip.addChild(this.timerContainerImage),this.timerContainerClip.addChild(this.timerImage),this.gameContainer.addChild(this.timerContainerClip)},e.prototype.update=function(e){null!=this.timerImage&&void 0!=this.timerImage&&(this.timerImage.scaleX=e*this.initScale)},e.prototype.Destroy=function(){this.timerContainerClip.removeChild(this.timerContainerImage),this.timerContainerClip.removeChild(this.timerImage),this.gameContainer.removeChild(this.timerContainerClip)},e}(),Card=function(){function e(e){this.baseImageUrl="../asset/final/",this.backImageUrl="",this.face=0,this.InitScaleX=.6,this.waitTime=1e3,this.Card=function(){},this.mainGame=e}return e.prototype.init=function(e,t,i,a,s,n){var r=this;this.cardContainer=new createjs.MovieClip,this.thisStage=e,this.container=t;var h=Math.random();this.id=n%(MainGame.width*MainGame.height/2)+1;if(MainGame.totalCard>MainGame.width*MainGame.height/2){for(var o=!1,i=0;i<this.mainGame.arrCard.length;i++)this.mainGame.arrCard[i].cardFaceName=="card"+this.id&&(o=!0);1==o?this.cardFaceName="card"+this.id:this.cardFaceName="card"+(this.id+8)}else h>.5?this.cardFaceName="card"+(this.id+8):this.cardFaceName="card"+this.id;this.frontUrl=this.baseImageUrl+this.id+".png",this.backImageUrl=this.baseImageUrl+"bcak.png",this.picked=!1,this.backImage=new createjs.Bitmap(PreloadGame.queue.getResult("card_back")),console.log(this.cardFaceName),this.frontImage=new createjs.Bitmap(PreloadGame.queue.getResult(this.cardFaceName)),this.updateStage(this.backImage),this.updateStage(this.frontImage),this.backImage.image.onload=function(){return r.updateStage(r.backImage)},this.frontImage.image.onload=function(){return r.updateStage(r.frontImage)},this.cardContainer.id=this.id,this.InitScaleX=MainGame.GameHeight/5.5/this.frontImage.image.height,this.cardContainer.scaleY=this.InitScaleX,this.cardContainer.scaleX=this.cardContainer.scaleY,this.trueWidth=this.backImage.image.width*this.InitScaleX,this.margin=this.trueWidth/25,this.cardContainer.addEventListener("click",function(){return r.cardClick(r.cardContainer,r)}),this.cardContainer.addChild(this.frontImage),this.cardContainer.addChild(this.backImage),this.container.addChild(this.cardContainer)},e.prototype.reposition=function(e,t){this.cardContainer.x=e*(this.backImage.image.width*this.cardContainer.scaleX+this.margin)+this.backImage.image.width/2*this.InitScaleX,this.cardContainer.y=t*(this.backImage.image.height*this.cardContainer.scaleY+this.margin)+this.backImage.image.height/2*this.InitScaleX},e.prototype.updateStage=function(e){this.thisStage.update(),e.regX=e.image.width/2,
e.regY=e.image.height/2,this.thisStage.update()},e.prototype.cardClick=function(e,t){function i(e){MainGame.totalCard--,0==MainGame.totalCard&&e.mainGame.handleWin()}if(void 0===e&&(e=null),void 0===t&&(t=null),!t.picked)if(this.mainGame.idleCard=0,0==MainGame.firstId)MainGame.firstId=t.id,MainGame.firstCard=t,t.swapToFace(t);else if(0==MainGame.secondId){if(MainGame.firstCard==t)return t.swapToFace(t),MainGame.firstId=0,void(MainGame.secondId=0);MainGame.secondId=t.id,MainGame.secondCard=t,t.swapToFace(t),MainGame.firstId==MainGame.secondId&&(MainGame.firstCard.picked=!0,MainGame.secondCard.picked=!0,MainGame.firstId=0,MainGame.secondId=0,createjs.Tween.get(MainGame.firstCard.cardContainer).wait(t.waitTime).to({visible:!1},0).call(i,[t],this),createjs.Tween.get(MainGame.secondCard.cardContainer).wait(t.waitTime).to({visible:!1},0).call(i,[t],this))}else MainGame.firstCard.swapToFace(MainGame.firstCard),MainGame.secondCard.swapToFace(MainGame.secondCard),MainGame.firstId=0,MainGame.secondId=0,this.cardClick(null,t)},e.prototype.swapToFace=function(e){function t(e){0==e.face?(e.face=1,e.backImage.visible=!1,e.frontImage.visible=!0):(e.face=0,e.frontImage.visible=!1,e.backImage.visible=!0),createjs.Tween.get(e.cardContainer).to({scaleX:e.InitScaleX},100)}createjs.Tween.get(e.cardContainer).to({scaleX:0},100).call(t,[e],this)},e.prototype.Destroy=function(){var e=this;this.cardContainer.removeEventListener("click",function(){return e.cardClick(e.cardContainer,e)}),this.cardContainer.removeChild(this.frontImage),this.cardContainer.removeChild(this.backImage),this.container.removeChild(this.cardContainer)},e}();
